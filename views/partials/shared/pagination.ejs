<% if (pagination && pagination.totalPages > 1) { %>
<div class="pagination">
  <div class="pagination-info">
    Showing <%= ((pagination.currentPage - 1) * pagination.limit) + 1 %>-<%=
    Math.min(pagination.currentPage * pagination.limit, pagination.totalFiles)
    %> of <%= pagination.totalFiles %> files
  </div>

  <div class="pagination-controls">
    <% if (pagination.hasPrev) { %>
    <a
      href="?page=<%= pagination.currentPage - 1 %>"
      class="pagination-btn prev"
    >
      &larr; Previous
    </a>
    <% } else { %>
    <span class="pagination-btn prev disabled">&larr; Previous</span>
    <% } %>

    <div class="pagination-pages">
      <% let startPage = Math.max(1, pagination.currentPage - 2); let endPage =
      Math.min(pagination.totalPages, pagination.currentPage + 2); if (startPage
      > 1) { %>
      <a href="?page=1" class="pagination-page">1</a>
      <% if (startPage > 2) { %>
      <span class="pagination-ellipsis">...</span>
      <% } } for (let i = startPage; i <= endPage; i++) { %> <% if (i ===
      pagination.currentPage) { %>
      <span class="pagination-page active"><%= i %></span>
      <% } else { %>
      <a href="?page=<%= i %>" class="pagination-page"><%= i %></a>
      <% } %> <% } if (endPage < pagination.totalPages) { %> <% if (endPage <
      pagination.totalPages - 1) { %>
      <span class="pagination-ellipsis">...</span>
      <% } %>
      <a href="?page=<%= pagination.totalPages %>" class="pagination-page"
        ><%= pagination.totalPages %></a
      >
      <% } %>
    </div>

    <% if (pagination.hasNext) { %>
    <a
      href="?page=<%= pagination.currentPage + 1 %>"
      class="pagination-btn next"
    >
      Next &rarr;
    </a>
    <% } else { %>
    <span class="pagination-btn next disabled">Next &rarr;</span>
    <% } %>
  </div>
</div>
<% } %>
